<!doctype html><html lang=en-gb>
<head>
<title>Creating new Org Files for Hugo &#183; Pragmatic</title>
<meta name=generator content="Hugo 0.88.1">
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name=author content="Mario Martelli">
<meta name=description content>
<link rel=canonical href=https://schnuddelhuddel.de/creating-new-org-files-for-hugo/>
<link rel=icon href=https://schnuddelhuddel.de/favicon.ico>
<link rel=apple-touch-icon href=https://schnuddelhuddel.de/apple-touch-icon.png>
<link rel=stylesheet href=https://schnuddelhuddel.de/css/style.css>
<link rel=stylesheet href=https://schnuddelhuddel.de/css/font-awesome.min.css>
<link rel=stylesheet href=https://schnuddelhuddel.de/css/monokai.css>
<link rel=stylesheet href=https://schnuddelhuddel.de/fancybox/jquery.fancybox.css>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600" rel=stylesheet type=text/css>
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel=stylesheet type=text/css>
<meta property="og:title" content="Creating new Org Files for Hugo">
<meta property="og:description" content="As the command `hugo new` does not work for org files I'm using emacs for that task.
 The code is based on what I found at Peter Smith's which seem to be based on the code from Tohojo.
 First we've to set the location where the blog source files are. (setq hugo-base-dir &#34;~/Documents/repo/TechBlog/&#34;)   Then we need the current time in two formats. The first for the name of the file we are creating and the second is used in the frontmatter.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://schnuddelhuddel.de/creating-new-org-files-for-hugo/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2017-06-03T18:44:38+02:00">
<meta property="article:modified_time" content="2017-06-03T18:44:38+02:00">
<meta itemprop=name content="Creating new Org Files for Hugo">
<meta itemprop=description content="As the command `hugo new` does not work for org files I'm using emacs for that task.
 The code is based on what I found at Peter Smith's which seem to be based on the code from Tohojo.
 First we've to set the location where the blog source files are. (setq hugo-base-dir &#34;~/Documents/repo/TechBlog/&#34;)   Then we need the current time in two formats. The first for the name of the file we are creating and the second is used in the frontmatter."><meta itemprop=datePublished content="2017-06-03T18:44:38+02:00">
<meta itemprop=dateModified content="2017-06-03T18:44:38+02:00">
<meta itemprop=wordCount content="219">
<meta itemprop=keywords content="hugo,">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Creating new Org Files for Hugo">
<meta name=twitter:description content="As the command `hugo new` does not work for org files I'm using emacs for that task.
 The code is based on what I found at Peter Smith's which seem to be based on the code from Tohojo.
 First we've to set the location where the blog source files are. (setq hugo-base-dir &#34;~/Documents/repo/TechBlog/&#34;)   Then we need the current time in two formats. The first for the name of the file we are creating and the second is used in the frontmatter.">
<meta name=twitter:site content="@schnuddelhuddel">
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js></script>
</head>
<body>
<div class=container>
<div id=container>
<header id=header>
<div id=header-main class=header-inner>
<div class=outer>
<a href=https://schnuddelhuddel.de id=logo>
<i class=logo style=background-image:url(https://schnuddelhuddel.de/logo/logo.png)></i>
<span class=site-title>Pragmatic</span>
</a>
<nav id=main-nav>
<a class=main-nav-link href=https://schnuddelhuddel.de/about/><i class="fa fa-info"></i> About</a>
<a class=main-nav-link href=https://schnuddelhuddel.de/tags/><i class="fa fa-tags"></i> Tags</a>
<a class=main-nav-link href=https://www.martelli.de><i class="fa fa-bicycle"></i> Cycling</a>
</nav>
<nav id=sub-nav>
<div class=profile id=profile-nav>
<a id=profile-anchor href=javascript:;><img class=avatar src=https://schnuddelhuddel.de/logo/Avatar.png><i class="fa fa-caret-down"></i></a>
</div>
</nav>
<div id=search-form-wrap>
<form action=//google.com/search method=get accept-charset=utf-8 class=search-form>
<input type=search name=q class=search-form-input placeholder=Search>
<button type=submit class=search-form-submit>
</button>
<input type=hidden name=sitesearch value=https://schnuddelhuddel.de>
</form>
</div>
</div>
</div>
<div id=main-nav-mobile class="header-sub header-inner">
<table class="menu outer">
<tbody>
<tr>
<a class=main-nav-link href=https://schnuddelhuddel.de/about/ title=About>
<i class="fa fa-info"></i>
</a>
<a class=main-nav-link href=https://schnuddelhuddel.de/tags/ title=Tags>
<i class="fa fa-tags"></i>
</a>
<a class=main-nav-link href=https://www.martelli.de title=Cycling>
<i class="fa fa-bicycle"></i>
</a>
<td>
<form action=//google.com/search method=get accept-charset=utf-8 class=search-form>
<input type=search name=q class=search-form-input placeholder=Search>
<input type=hidden name=sitesearch value=https://schnuddelhuddel.de>
</form>
</td>
</tr>
</tbody>
</table>
</div>
</header>
<div class=outer>
<aside id=profile>
<div class="inner profile-inner">
<div class="base-info profile-block">
<img id=avatar src=https://schnuddelhuddel.de/logo/Avatar.png>
<h2 id=name>Mario Martelli</h2>
<h3 id=title>Pragmatic Integrator</h3>
<span id=location><i class="fa fa-map-marker"></i>Europe</span>
<a id=follow href=https://twitter.com/schnuddelhuddel>
Follow
</a>
</div>
<div class="article-info profile-block">
<div class=article-info-block>
7
<span>Posts</span>
</div>
<div class=article-info-block>
8
<span>
Tags
</span>
</div>
</div>
<div class="profile-block social-links">
<table>
<tr>
<td><a href=//github.com/mgmart target=_blank title=GitHub><i class="fa fa-github"></i></a></td>
<td><a href=//twitter.com/schnuddelhuddel target=_blank title=Twitter><i class="fa fa-twitter"></i></a></td>
<td><a href=https://schnuddelhuddel.de/index.xml target=_blank title=RSS><i class="fa fa-rss"></i></a></td>
</tr>
</table>
</div>
</div>
</aside>
<section id=main>
<article id=page-undefined class="article article-type-page" itemscope itemprop=blogPost>
<div class=article-inner>
<img src=https://schnuddelhuddel.de/images/blue-unicorn.png class=article-banner>
<header class=article-header>
<a href=https://schnuddelhuddel.de/creating-new-org-files-for-hugo/>
<h1 class=article-title itemprop=name>
Creating new Org Files for Hugo
</h1>
</a>
<div class=article-meta>
<div class=article-date>
<i class="fa fa-calendar"></i>
<time datetime="2017-06-03 18:44:38 +0200 +0200" itemprop=datePublished>2017-06-03</time>
&#183;
219
words
&#183;
2
minute read
</div>
<div class=article-category>
<i class="fa fa-folder"></i>
<a class=article-category-link href=https://schnuddelhuddel.de/categories/emacs>emacs</a>
</div>
<div class=article-category>
<i class="fa fa-tags"></i>
<a class=article-category-link href=https://schnuddelhuddel.de/tags/hugo>hugo</a>
</div>
</div>
</header>
<div class=article-entry itemprop=articleBody>
<p>
As the command `hugo new` does not work for org files I'm using emacs for that
task.</p>
<p>
The code is based on what I found at <a href=http://www.petersmith.org/blog/2016/11/21/automating-hugo-part2/>Peter Smith's</a> which seem to be based on the
code from <a href=https://blog.tohojo.dk/2015/10/integrating-hugo-into-emacs.html>Tohojo</a>.</p>
<p>
First we've to set the location where the blog source files are. </p>
<div class="src src-emacs-lisp">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp>(setq hugo-base-dir <span style=color:#e6db74>&#34;~/Documents/repo/TechBlog/&#34;</span>)</code></pre></div>
</div>
<p>
Then we need the current time in two formats. The first for the name of the file
we are creating and the second is used in the frontmatter.</p>
<div class="src src-emacs-lisp">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp>(defun today-is ()
  (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y-%m-%d-&#34;</span>))

(defun now-is ()	 
 (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y-%m-%dT%T&#34;</span>)
   ((lambda (x) (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>substring</span> x <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>3</span>) <span style=color:#e6db74>&#34;:&#34;</span> (<span style=color:#a6e22e>substring</span> x <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>5</span>)))
   (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%z&#34;</span>))))</code></pre></div>
</div>
<p>
Then a new buffer is created and populated with the frontmatter. I found no
way to set the mode other than hardcoding it to org-mode. </p>
<div class="src src-emacs-lisp">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp>(defun org-hugo-new-post ()
  <span style=color:#e6db74>&#34;Creates a new org file in Hugo&#39;s content/post directory&#34;</span>
  (interactive)
  (let* ((title (<span style=color:#a6e22e>read-from-minibuffer</span> <span style=color:#e6db74>&#34;Title: &#34;</span>))
         (filename (<span style=color:#a6e22e>read-from-minibuffer</span> <span style=color:#e6db74>&#34;Filename: &#34;</span>
					 (replace-regexp-in-string <span style=color:#e6db74>&#34;-\\.org&#34;</span> <span style=color:#e6db74>&#34;.org&#34;</span>
								   (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>downcase</span>
									    (replace-regexp-in-string <span style=color:#e6db74>&#34;[^a-z0-9]+&#34;</span> <span style=color:#e6db74>&#34;-&#34;</span> title))
									   <span style=color:#e6db74>&#34;.org&#34;</span>))))
	 (blogfile (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;post/&#34;</span> (today-is) filename))
	 (url (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>downcase</span>
		       (replace-regexp-in-string <span style=color:#e6db74>&#34;[^a-z0-9]+&#34;</span> <span style=color:#e6db74>&#34;-&#34;</span>
						 title))))	 
         (path (<span style=color:#a6e22e>concat</span> hugo-base-dir <span style=color:#e6db74>&#34;content/&#34;</span> blogfile)))

    (if (<span style=color:#a6e22e>file-exists-p</span> path)
        (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;File already exists!&#34;</span>)
      (<span style=color:#a6e22e>message</span> blogfile)
      (switch-to-buffer (generate-new-buffer blogfile))
      (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;#+DATE: &#34;</span> (now-is))
      (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;\n#+TITLE: &#34;</span> title)
      (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;\n#+URL: /&#34;</span> url <span style=color:#e6db74>&#34;/&#34;</span>)
      (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;\n#+BANNER: \n#+CATEGORIES: \n#+TAGS:\n\n&#34;</span>)
      (org-mode)
      (write-file path)
      (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-max</span>)))))</code></pre></div>
</div>
<p>
Banner image courtesy of <a href=https://pixabay.com/de/users/Lohrelei-1422286/>Lohrelei</a></p>
</div>
<footer class=article-footer>
<a data-url=https://schnuddelhuddel.de/creating-new-org-files-for-hugo/ data-id=6b124c666ccf2120288e7a5dc346cede class=article-share-link>
<i class="fa fa-share"></i>
Share
</a>
<script>(function(a){if(typeof __SHARE_BUTTON_BINDED__=='undefined'||!__SHARE_BUTTON_BINDED__)__SHARE_BUTTON_BINDED__=!0;else return;a('body').on('click',function(){a('.article-share-box.on').removeClass('on')}).on('click','.article-share-link',function(i){var d,f,c,e,g,b,h;if(i.stopPropagation(),d=a(this),f=d.attr('data-url'),c=encodeURIComponent(f),e='article-share-box-'+d.attr('data-id'),g=d.offset(),a('#'+e).length){if(b=a('#'+e),b.hasClass('on')){b.removeClass('on');return}}else h=['<div id="'+e+'" class="article-share-box">','<input class="article-share-input" value="'+f+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+c+'" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+c+'" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+c+'" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+c+'" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>','</div>','</div>'].join(''),b=a(h),a('body').append(b);a('.article-share-box.on').hide(),b.css({top:g.top+25,left:g.left}).addClass('on')}).on('click','.article-share-box',function(a){a.stopPropagation()}).on('click','.article-share-box-input',function(){a(this).select()}).on('click','.article-share-box-link',function(a){a.preventDefault(),a.stopPropagation(),window.open(this.href,'article-share-box-window-'+Date.now(),'width=500,height=450')})})(jQuery)</script>
</footer>
</div>
<nav id=article-nav>
<a href=https://schnuddelhuddel.de/switching-from-wordpress-to-hugo/ id=article-nav-older class=article-nav-link-wrap>
<strong class=article-nav-caption>
Older
</strong>
<div class=article-nav-title>Switching from Wordpress to Hugo</div>
</a>
<a href=https://schnuddelhuddel.de/deployment-of-a-hugo-site-on-github-pages/ id=article-nav-newer class=article-nav-link-wrap>
<strong class=article-nav-caption>
Newer
</strong>
<div class=article-nav-title>Deployment of a Hugo site on GitHub Pages</div>
</a>
</nav>
</article>
</section>
<aside id=sidebar>
<div class=widget-wrap>
<h3 class=widget-title>
Recents
</h3>
<div class=widget>
<ul id=recent-post>
<li>
<div class=item-thumbnail>
<a href=https://schnuddelhuddel.de/emacs-engine-problem-statement/ class=thumbnail>
<span style=background-image:url(https://schnuddelhuddel.de/images/emacs-ffm.jpeg) alt="Creating new Org Files for Hugo" class=thumbnail-image></span>
</a>
</div>
<div class=item-inner>
<p class=item-category>
<a class=article-category-link href=https://schnuddelhuddel.de/categories/emacs>
emacs
</a>
</p>
<p class=item-title><a href=https://schnuddelhuddel.de/emacs-engine-problem-statement/ class=title>Control emacs from your mobile</a></p>
<p class=item-date>
<time datetime="2021-10-20 18:35:41 +0100 +0100" itemprop=datePublished>2021-10-20</time>
</p>
</div>
</li>
<li>
<div class=item-thumbnail>
<a href=https://schnuddelhuddel.de/posting-apple-watch-trainings-to-strava-2/ class=thumbnail>
<span style=background-image:url(https://schnuddelhuddel.de/images/workout-exporter.png) alt="Creating new Org Files for Hugo" class=thumbnail-image></span>
</a>
</div>
<div class=item-inner>
<p class=item-category>
<a class=article-category-link href=https://schnuddelhuddel.de/categories/integration>
Integration
</a>
</p>
<p class=item-title><a href=https://schnuddelhuddel.de/posting-apple-watch-trainings-to-strava-2/ class=title>Posting Apple Watch Workouts to Strava (â…¡)</a></p>
<p class=item-date>
<time datetime="2017-12-04 18:35:41 +0100 +0100" itemprop=datePublished>2017-12-04</time>
</p>
</div>
</li>
<li>
<div class=item-thumbnail>
<a href=https://schnuddelhuddel.de/posting-apple-watch-trainings-to-strava/ class=thumbnail>
<span style=background-image:url(https://schnuddelhuddel.de/images/gears.png) alt="Creating new Org Files for Hugo" class=thumbnail-image></span>
</a>
</div>
<div class=item-inner>
<p class=item-category>
<a class=article-category-link href=https://schnuddelhuddel.de/categories/integration>
Integration
</a>
</p>
<p class=item-title><a href=https://schnuddelhuddel.de/posting-apple-watch-trainings-to-strava/ class=title>Posting Apple Watch Workouts to Strava</a></p>
<p class=item-date>
<time datetime="2017-11-19 15:44:08 +0100 +0100" itemprop=datePublished>2017-11-19</time>
</p>
</div>
</li>
<li>
<div class=item-thumbnail>
<a href=https://schnuddelhuddel.de/deployment-of-a-hugo-site-on-github-pages/ class=thumbnail>
<span style=background-image:url(https://schnuddelhuddel.de/deployment-of-a-hugo-site-on-github-pages/crowd.jpg) alt="Creating new Org Files for Hugo" class=thumbnail-image></span>
</a>
</div>
<div class=item-inner>
<p class=item-category>
<a class=article-category-link href=https://schnuddelhuddel.de/categories/hugo>
hugo
</a>
</p>
<p class=item-title><a href=https://schnuddelhuddel.de/deployment-of-a-hugo-site-on-github-pages/ class=title>Deployment of a Hugo site on GitHub Pages</a></p>
<p class=item-date>
<time datetime="2017-07-03 11:02:49 +0200 +0200" itemprop=datePublished>2017-07-03</time>
</p>
</div>
</li>
<li>
<div class=item-thumbnail>
<a href=https://schnuddelhuddel.de/creating-new-org-files-for-hugo/ class=thumbnail>
<span style=background-image:url(https://schnuddelhuddel.de/images/blue-unicorn.png) alt="Creating new Org Files for Hugo" class=thumbnail-image></span>
</a>
</div>
<div class=item-inner>
<p class=item-category>
<a class=article-category-link href=https://schnuddelhuddel.de/categories/emacs>
emacs
</a>
</p>
<p class=item-title><a href=https://schnuddelhuddel.de/creating-new-org-files-for-hugo/ class=title>Creating new Org Files for Hugo</a></p>
<p class=item-date>
<time datetime="2017-06-03 18:44:38 +0200 +0200" itemprop=datePublished>2017-06-03</time>
</p>
</div>
</li>
</ul>
</div>
</div>
<div class=widget-wrap>
<h3 class=widget-title>Categories</h3>
<div class=widget>
<ul class=category-list>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/categories/emacs>
emacs
</a>
<span class=category-list-count>2</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/categories/hugo>
hugo
</a>
<span class=category-list-count>1</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/categories/integration>
integration
</a>
<span class=category-list-count>2</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/categories/tools>
tools
</a>
<span class=category-list-count>1</span>
</li>
</ul>
</div>
</div>
<div class=widget-wrap>
<h3 class=widget-title>
Tags
</h3>
<div class=widget>
<ul class=category-list>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/emacs>
emacs
</a>
<span class=category-list-count>1</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/git>
git
</a>
<span class=category-list-count>1</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/github>
github
</a>
<span class=category-list-count>1</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/hugo>
hugo
</a>
<span class=category-list-count>3</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/org-mode>
org-mode
</a>
<span class=category-list-count>1</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/strava>
strava
</a>
<span class=category-list-count>2</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/watchos>
watchos
</a>
<span class=category-list-count>2</span>
</li>
<li class=category-list-item>
<a class=category-list-link href=https://schnuddelhuddel.de/tags/wordpress>
wordpress
</a>
<span class=category-list-count>1</span>
</li>
</ul>
</div>
</div>
<div class=widget-wrap>
<h3 class=widget-title>
Tag cloud
</h3>
<div class="widget tagcloud">
<a href=https://schnuddelhuddel.de/tags/emacs style=font-size:12px>emacs</a>
<a href=https://schnuddelhuddel.de/tags/git style=font-size:12px>git</a>
<a href=https://schnuddelhuddel.de/tags/github style=font-size:12px>github</a>
<a href=https://schnuddelhuddel.de/tags/hugo style=font-size:12px>hugo</a>
<a href=https://schnuddelhuddel.de/tags/org-mode style=font-size:12px>org-mode</a>
<a href=https://schnuddelhuddel.de/tags/strava style=font-size:12px>strava</a>
<a href=https://schnuddelhuddel.de/tags/watchos style=font-size:12px>watchos</a>
<a href=https://schnuddelhuddel.de/tags/wordpress style=font-size:12px>wordpress</a>
</div>
</div>
<div id=toTop class="fa fa-angle-up"></div>
</aside>
</div>
</div>
<footer id=footer>
<div class=outer>
<div id=footer-info class=inner>
&copy; 2021
Mario Martelli &ndash; <a href=/imprint>Imprint</a> <br>
Powered by <a href=//gohugo.io>Hugo</a>. Theme by <a href=http://github.com/ppoffice>PPOffice</a>.
</div>
</div>
</footer>
<script src=https://schnuddelhuddel.de/fancybox/jquery.fancybox.pack.js></script>
<script src=https://schnuddelhuddel.de/js/script.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>